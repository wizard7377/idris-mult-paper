\section{Resource Algebras as Types}

In many programming languages, algebras are used as a suplement to the type system to model various concepts.
Among these, Granule uses a resource algebra to model multiplicity \cite{quant_graded_modal}.
However, a number of libraries in Haskell use the type system itself to model algebras \needcite{}.

It stands to reason then that it should be possible, with mu types and Idris' rich type system, to model the resource algebras of Granule.
We propose that this is indeed possible with a definition of \code{Form'} types.

\subsection{Formula Language}

\begin{definition}
  \code{Form'} is a polymorphic type indexed by a \nat{}.
  We also define a function, $\code{Eval'} : \fn<1> {\code{Form'} n}{\fn{\code{QVect} n \nat}{\nat}}$
  Further, we define a function $\code{Solve'} : \fn<1>{\code{Form'} n}{\fn<1>{\nat}{\tpe}}$, which is defined as $\code{Solve'} \phi x \deq \et<1>[x]{\code{Form'} n}{\code{Eval'} \phi x \peq y}$.
  In addition, we define $\code{Unify'} \phi \psi \deq \fa<1>[n]{\nat}{\fn{\code{Solve'} n \phi}{\code{Solve' n \psi}}}$
\end{definition}

We will write $x \in \phi$ or $\phi \ni x$ for $\code{Solve'} \phi x$, and $\phi \subseteq \psi$ $\psi \supseteq \phi$ for $\code{Unify'} \phi \psi$. 
Notably, this means that $\phi \subseteq \psi := \fa<1>[n]{\nat}{\fn{\phi \ni n}{\psi \ni n}}$.
This allows us to consider formulas as ``sets'' of natural numbers, those being all their possible outputs. 
We then say that a given number is ``in'' the formula if it is possible for it to be output, and a subset if every ``element'' is in the superset. 
We define the interpretation of each constructor of \code{Form'} based off its branch of \code{Eval'}

This means that \code{Form'} forms a category on $\subseteq$

\todo{Need proof}

\subsection{The Core Formulas}

Out of six total constructors of formulas, four of them are binary constructors modeling addition, multiplication, joins and meets, while the other two model the basic notion of ``variable'' and ``constant'' in a formula.

These last two we will discuss first.
The first of these is \code{FVar'}, which has the type $\code{Form'} 1$. 
It models the notion of a singular variable in the formula.
It evaluates as $\code{Eval'} \code{FVar'} [x] \deq x$, notably, however, this is the only branch, as the only possible index that \code{FVar'} can produce is 1.

Of all the formulas, \code{FVar'} is the most general. 
That is to say, it is the terminal object in the category of \code{Form'}. 

\todo{Need proof}

The next of these, \code{FVal'}
%%% Local Variables:
%%% mode: LaTeX
%%% TeX-master: "../main"
%%% End:
