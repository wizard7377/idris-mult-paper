\section{Background}

There are a couple constructions we must first define before we discuss the results posited here, however.
Among these are the linear natural numbers, cloning and dropping, as well as existential types

\subsection{Linear Natural Numbers}

While linear values are quite useful in of themselves, they have one very large problem, the fact that reflection about them is limited.
This is particarly problematic with linear natural numbers, which we define here as \ident QNat in \ref{lst:def_qnat}.

\begin{listing}
	\begin{minted}{idris}
		data QNat : Type where
			Zero : QNat
			Succ : (1 k : QNat) -> QNat
	\end{minted}
	\caption{The definition of \thislib's natural numbers}
	\label{lst:def_qnat}
\end{listing}

While addition is fine, once we get to multiplication we begin using one of the variables are variable amount of times. 
The \citetitle{idris_linear} library solves this by using inference to essientally clone the first value. 
Here, however, we opt for a different mechanism, that allows for easier reflection.
Namely, we use the fact that erased functions are free to disregard multiplicities, and thence define a pair of multiplication functions, \code{lmul} and \code{lmul'}.

The first of these is the unrestricted ``runtime'' version of it, and its definition is \emph{not exported}.
The second of these is the erased ``reflectable'' version of it, who's definition follows the usual structure for natural numbers, and is much easier to infer about.
We then define an assumption \code{mulRep} which is of the form $\code{lmul} \peq \code{lmul'}$, and thereby can prove things about \code{lmul} through simpler proofs on \code{lmul'}

\section{Conatural numbers}
\label{sec:conat}

The conatural numbers are the natural numbers, \nat{}, extended with a fixpoint, $\infty$ \cite{dependent_linear}.

\begin{definition}
  The conatural numbers, $\conat$, have two constructors, $\cofix : \conat$, and $\cofin : \fn_1{\nat}{\conat}$ written in Idris as \code{Fix} and \code{Fin}, respectivly
\end{definition}

Note that \cofix{} is a simple constructor of \conat, it is not special in any way, as opposed to the definition usually given in Rocq, which usually defines conatural numbers as merely a the natural numbers with some postulated ``fixpoint'' at some value.
Granted, this makes conatural numbers in Rocq fairly easy to deal with, \conat{} tends to be rather difficult to work with, but we gain concreteness in exchange.

Often, we desire to talk about the ``successors'' of a given value.
We define the successor, \cosuc{n}, as, for any finite value, its finite successor, and for \cofix{}, simply as \cofix{}.
This unfourtantly means that successors of values are not neccaisarlly distinct from themselves.
Perhaps even more troubling is the fact that this means that \conat{} \emph{is not} well-founded.

However, fourtanetly, by defining \code{Finite}, we can create a set of 

\subsection{Existential Types}

Existential types, in regards to dependent types, usually refers to dependent pair ($\Sigma$) types \cite{hottbook}.
In this context, we see the first element of the pair as ``evidence'' for the type of the second element of the pair.
In Idris, this is formalized (in \idris's \citetitle{idris_base}) by stating that the first arguement is runtime erased, in a similar way to which universal quantifiaction is a function that is erased.

However, for our usage here this is not suitaible, as we are dealing with principally linear values, and \ident Exists is unrestricted.
Fourtanetly, however, the change from unrestricted to linear existentials is quite trivial, the construction of which may be found at \ref{lst:def_lexists1}

\begin{listing}
	\begin{minted}{idris}
		record Exists (t : Type) (p : (t -> Type)) where
			constructor Evidence
			0 fst' : t 
			1 snd' : p fst'
	\end{minted}
	\caption{Definition of linear existentials}
	\label{lst:def_lexists1}
\end{listing}

Not much is notable about this, we define the operations as is usual, except every time a function would be unrestricted over the second value it is instead linear.
We also have a operator, \code{\#?}, which serves as sugar for this, using \idris's \ident typebind , mechanism.


%%% Local Variables:
%%% mode: LaTeX
%%% TeX-master: "../main"
%%% End:
